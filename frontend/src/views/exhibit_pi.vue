<template>
  <div>
    <el-col :span="20" :offset="1">
      <div class="block">
        <span class="demonstration"></span>
        <el-slider
          v-model="show_range"
          range
          :min="1"
          :max="195"
          @change="changeShow()"
        ></el-slider>
      </div>
      <div id="myChart" :style="{ width: '1200px', height: '400px' }"></div>
    </el-col>
  </div>
</template>

<script>
export default {
  name: "net",
  components: {},

  data() {
    return {
      show_range: [1, 60],
      alldata: {
        number: [
          1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
          21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37,
          38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54,
          55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71,
          72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88,
          89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104,
          105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118,
          119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132,
          133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146,
          147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160,
          161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174,
          175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188,
          189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200,
        ],
        trueValue: [
          0.93, 0.94, 0.805, 0.9, 0.8375, 0.9, 0.781, 0.862, 0.756, 0.882, 0.88,
          0.94, 0.87, 0.91, 0.85, 0.87, 0.781, 0.895, 0.837, 0.857, 0.93, 0.945,
          0.805, 0.839, 0.8375, 0.879, 0.781, 0.862, 0.756, 0.882, 0.958, 0.897,
          0.982, 0.795, 0.85, 0.725, 0.781, 0.895, 0.894, 0.983, 0.885, 0.89,
          0.869, 0.87, 0.91, 0.901, 0.887, 0.867, 0.885, 0.89, 0.857, 0.87,
          0.852, 0.88, 0.923, 0.897, 0.915, 0.858, 0.87, 0.881, 0.895, 0.937,
          0.857, 0.93, 0.905, 0.855, 0.889, 0.898, 0.879, 0.911, 0.892, 0.928,
          0.882, 0.856, 0.8, 0.881, 0.895, 0.837, 0.757, 0.93, 0.913, 0.805,
          0.879, 0.875, 0.779, 0.781, 0.892, 0.756, 0.782, 0.928, 0.897, 0.932,
          0.895, 0.85, 0.785, 0.881, 0.795, 0.877, 0.853, 0.925, 0.915, 0.805,
          0.849, 0.8575, 0.879, 0.881, 0.876, 0.921, 0.856, 0.91, 0.857, 0.898,
          0.767, 0.895, 0.878, 0.857, 0.912, 0.923, 0.845, 0.839, 0.835, 0.879,
          0.781, 0.862, 0.756, 0.882, 0.958, 0.897, 0.982, 0.895, 0.85, 0.825,
          0.781, 0.895, 0.894, 0.883, 0.885, 0.89, 0.869, 0.92, 0.91, 0.901,
          0.887, 0.943, 0.885, 0.89, 0.95, 0.87, 0.952, 0.88, 0.923, 0.897,
          0.915, 0.958, 0.87, 0.881, 0.895, 0.937, 0.857, 0.903, 0.945, 0.855,
          0.889, 0.898, 0.879, 0.911, 0.867, 0.912, 0.898, 0.946, 0.895, 0.881,
          0.875, 0.867, 0.942, 0.913, 0.933, 0.885, 0.859, 0.9175, 0.889, 0.925,
          0.945, 0.896, 0.882, 0.912, 0.915, 0.898, 0.899, 0.858, 0.877, 0.912,
          0.923, 0.898, 0.944, 0.935, 0.916, 0.931, 0.892, 0.881,
        ],
        predictValue: [
          0.913675259404184, 0.933003705472129, 0.878992064275502,
          0.903686940765112, 0.841179450971394, 0.898899014298818,
          0.8397098373277, 0.884905306483473, 0.794401245329694,
          0.857256127487572, 0.896665060599412, 0.873540952041558,
          0.884627055770255, 0.907034582883708, 0.880692049371515,
          0.835331370443003, 0.828754517687491, 0.900668372888897,
          0.85143711706842, 0.876587907122122, 0.910819362714554,
          0.9156421882841, 0.850203745883204, 0.828328288270655,
          0.856253901805918, 0.868163843688809, 0.842908754365064,
          0.883111054062499, 0.82508713323423, 0.878876077789584,
          0.908941731199771, 0.885687025445581, 0.879291260659305,
          0.834568948257952, 0.830783208772847, 0.78891827351263,
          0.822034834313024, 0.89797513598009, 0.829692862482568,
          0.918446504598816, 0.871990365767242, 0.898644592614728,
          0.883665106257004, 0.887233717264357, 0.889789842132682,
          0.868072237621345, 0.883415588844229, 0.879645058752995,
          0.89679304637892, 0.884363380560238, 0.878513212426696,
          0.855387946295555, 0.840112638542851, 0.911664032929831,
          0.886798018472323, 0.893553072413394, 0.902197801214423,
          0.870879529048379, 0.904036912775041, 0.862100148235193,
          0.870973074449727, 0.931541957294856, 0.87258595785668,
          0.826675761326952, 0.906987422238354, 0.862396462834078,
          0.828328288270655, 0.880672363372441, 0.874498329664903,
          0.88154043824463, 0.8780082723019, 0.888462648199209,
          0.859302511720369, 0.862175804697917, 0.883691396606948,
          0.881128753494182, 0.891864302349984, 0.874685669778026,
          0.842943861169346, 0.880873995058975, 0.904972946082949,
          0.832618311025713, 0.86559255102404, 0.865901091496262,
          0.854554505358842, 0.844259598888042, 0.869156227232454,
          0.845595288138051, 0.845650393928874, 0.879453692388968,
          0.883110130776042, 0.913144184947192, 0.887917524135387,
          0.897230390159362, 0.861823399972879, 0.887633870983209,
          0.81943596531102, 0.873992942988942, 0.836872567982772,
          0.900459783794924, 0.896206668651794, 0.874472962422469,
          0.877540110368468, 0.885125932425425, 0.847528099592959,
          0.895640036857864, 0.889637561099012, 0.894475547809614,
          0.868863350968111, 0.893705057107945, 0.887950282745203,
          0.874034163295852, 0.828690216790075, 0.860298407798462,
          0.861727112843402, 0.858631144997995, 0.886693954015114,
          0.884835480616115, 0.879986872771547, 0.880984211180677,
          0.862176392169903, 0.89898615445585, 0.85242343818287,
          0.882358568535187, 0.856817554467604, 0.882950156104503,
          0.920367912638391, 0.923071600885366, 0.973706293578203,
          0.861806822477869, 0.873889401296873, 0.874789030503861,
          0.825699781577581, 0.908148074939581, 0.886616221620004,
          0.87170472956012, 0.887123434920877, 0.865092314319003,
          0.894235723273464, 0.911065137887475, 0.902898233387364,
          0.909509136485833, 0.893544847970467, 0.904296978254651,
          0.889614584387465, 0.887820363805943, 0.889207429416956,
          0.869687350795211, 0.913930888015443, 0.902515657266242,
          0.889517625143105, 0.903323640541043, 0.88153020120163,
          0.921797115198197, 0.851515217253249, 0.888535289653191,
          0.891171936504392, 0.896364094564252, 0.916898960924378,
          0.86966810125241, 0.922927669151934, 0.889400233557679,
          0.903410752110462, 0.881562541789964, 0.887677350404707,
          0.897569798898934, 0.864711023936552, 0.906593466784239,
          0.893572107770785, 0.90228839785297, 0.894048733062351,
          0.879456330215796, 0.865558076611727, 0.887242783416773,
          0.888723120069914, 0.848061438245064, 0.900123789880898,
          0.8907029347789, 0.860636961499666, 0.890143942267044,
          0.89121486562574, 0.87556257783131, 0.927455644961238,
          0.860333922491003, 0.866519517076984, 0.914191251287686,
          0.916886535324269, 0.904906287513834, 0.887024365561028,
          0.875787203596505, 0.919086882455244, 0.874455649734534,
          0.85179622479467, 0.901151008635338, 0.893257553831642,
          0.878520664888571, 0.912187011039539, 0.906372120401043,
          0.897242463700062, 0.887853948787631,
        ],
        piancha: [
          1.75534845116301, 0.744286651901168, 9.19156077956546,
          0.409660085012445, 0.439337429420178, 0.122331744575778,
          7.51726470265044, 2.65722813033329, 5.07952980551508,
          2.80542772249751, 1.89375688629682, 7.07011148494063,
          1.68127077819023, 0.325870012779347, 3.6108293378253,
          3.98489994908012, 6.1145349151717, 0.633337752949384,
          1.72486464377778, 2.28563677037596, 2.06243411671463,
          3.10664674242327, 5.61537215940422, 1.2719561060006, 2.23927185742304,
          1.23278228796258, 7.92685715301715, 2.44907819750569,
          9.13850968706746, 0.354186191657145, 5.12090488520136,
          1.26120117663534, 10.4591384257327, 4.9772261959688, 2.26079896790036,
          8.81631358794897, 5.25414011690448, 0.33241742794302,
          7.19319211604385, 6.56698834193122, 1.47001516754328,
          0.971302540980668, 1.68758414925248, 1.98088704188011,
          2.22089646893605, 3.65457962027248, 0.404104978102708,
          1.45848428523588, 1.33254761343729, 0.633328026939552,
          2.51029316530875, 1.67954640280977, 1.39523021797523,
          3.59818556020807, 3.92220818284692, 0.384272863612712,
          1.39914740825979, 1.50111061169918, 3.91228882471735,
          2.14527261802577, 2.68457268718134, 0.582501889556462,
          1.81866486075613, 11.1101331906503, 0.219604667221439,
          0.865083372406786, 6.82471448024129, 1.92958091620924,
          0.512135419237425, 3.23376089521076, 1.56857933835202,
          4.2604904957749, 2.57341136957268, 0.721472511438903,
          10.4614245758685, 0.0146144715303013, 0.350357279331394,
          4.50246950752999, 11.353218120125, 5.28236612269086,
          0.879195390695625, 3.43084609015068, 1.52530705073493,
          1.03987525757005, 9.69890954542259, 8.09982060026146,
          2.56096107259484, 11.8512285896893, 8.13943656379462,
          5.23128314774052, 1.5484804040087, 2.02315612154593,
          0.791338085431617, 5.55651648933671, 9.7864203787107,
          0.752993301158797, 3.07370632843019, 0.342879932845834,
          1.89067198326237, 2.65299634649471, 2.05391599433946,
          8.63018166738744, 3.36161488438964, 3.22168308168221,
          3.58042097918555, 1.66175219726038, 1.55679921221599,
          2.87996223565538, 1.50272791683539, 1.79065306506099,
          3.61146823164563, 2.66880141471581, 8.04305303651565,
          3.87727287168022, 1.85340400416834, 0.190331971761376,
          2.77478574395681, 4.13483416943499, 4.14045831615941,
          5.00407761390668, 3.25465774489857, 2.27373770828782,
          9.14512652789629, 2.36178289271311, 13.3356553528577,
          0.107727449490136, 3.92819283524102, 2.90653298610546,
          0.844572955376471, 3.70873491867386, 2.81051779963212,
          6.03503400046801, 5.7234035310603, 1.46905865246715,
          0.825925993288148, 1.27919257529785, 0.239936149251635,
          2.79861636865135, 2.90399577370127, 0.971180664404895,
          0.78041391347649, 0.944410264798331, 0.73786335630969,
          4.10424408752374, 0.521421964685309, 0.244902943152476,
          6.39921795610989, 0.0359366902056342, 3.99885630089884,
          2.55859741661841, 3.6275595727947, 0.704976648945703,
          3.65790150801859, 3.77900676428006, 2.12468767204035,
          0.855310970850278, 0.42771659168805, 4.33680954490374,
          6.98937700401143, 3.69124017138317, 2.33569638603872,
          4.02341912955311, 1.62100698655365, 1.83045191648508,
          0.987184346383045, 1.47422624600067, 0.264011079982471,
          0.592821624535199, 0.493083767173165, 4.62067675972833,
          0.106286808675868, 0.175217909671289, 1.07907695865977,
          2.3348077758677, 5.65571973780105, 7.11265736636759, 3.5237095518866,
          0.644399410045191, 0.190565948738762, 2.98158667389166,
          0.249141240240723, 5.34458618039893, 1.8565455067473,
          3.98058900770056, 1.75515679399274, 0.24026878154451,
          0.206178723963822, 0.769074333389079, 1.33210616673771,
          2.07310065227331, 4.79896037117947, 4.11670507296776,
          7.71438517934237, 0.350891830215815, 5.37525912800402,
          6.04057060015285, 0.416265170356005, 2.64531467228325,
          0.587720145746859, 0.77797375569024,
        ],
      },
      showdata: {
        number: [],
        trueValue: [],
        predictValue: [],
        piancha: [],
      },
    };
  },
  methods: {
    changeShow() {
      this.showdata.number = [];
      this.showdata.trueValue = [];
      this.showdata.predictValue = [];
      this.showdata.piancha = [];

      for (let i = this.show_range[0] - 1; i <= this.show_range[1] - 1; i++) {
        this.showdata.number.push(this.alldata.number[i]);
        this.showdata.trueValue.push(this.alldata.trueValue[i]);
        this.showdata.predictValue.push(this.alldata.predictValue[i]);
        this.showdata.piancha.push(this.alldata.piancha[i]);
      }

      this.createChart();
    },
    createChart() {
      let myChart = this.$echarts.getInstanceByDom(
        document.getElementById("myChart")
      );
      myChart.setOption({
        title: {
          text: "成材率拟合结果",
        },
        tooltip: {
          trigger: "axis",
        },
        legend: {
          data: ["真实成材率", "预测成材率", "预测偏差"],
        },
        grid: {
          left: "3%",
          right: "4%",
          bottom: "3%",
          containLabel: true,
        },
        toolbox: {
          feature: {
            saveAsImage: {},
          },
        },
        xAxis: {
          type: "category",
          boundaryGap: false,
          data: this.showdata.number,
        },
        yAxis: [
          {
            type: "value",
            name: "成材率",
          },
          {
            type: "value",
            name: "预测偏差",
            max: 25,
            axisLabel: {
              formatter: "{value} %",
            },
          },
        ],
        series: [
          {
            name: "真实成材率",
            type: "line",
            data: this.showdata.trueValue,
          },
          {
            name: "预测成材率",
            type: "line",
            data: this.showdata.predictValue,
          },
          {
            name: "预测偏差",
            type: "bar",
            data: this.showdata.piancha,
            yAxisIndex: 1,
          },
        ],
      });
    },
  },
  mounted() {
    let myChart = this.$echarts.init(document.getElementById("myChart"));
    myChart.setOption({
      title: {
        text: "成材率拟合结果",
      },
      tooltip: {
        trigger: "axis",
      },
      legend: {
        data: ["真实成材率", "预测成材率", "预测偏差"],
      },
      grid: {
        left: "3%",
        right: "4%",
        bottom: "3%",
        containLabel: true,
      },
      toolbox: {
        feature: {
          saveAsImage: {},
        },
      },
      xAxis: {
        type: "category",
        boundaryGap: false,
        data: [
          1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
          21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37,
          38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54,
          55, 56, 57, 58, 59, 60,
        ],
      },
      yAxis: [
        {
          type: "value",
          name: "成材率",
        },
        {
          type: "value",
          name: "预测偏差",
          max: 25,
          axisLabel: {
            formatter: "{value} %",
          },
        },
      ],
      series: [
        {
          name: "真实成材率",
          type: "line",
          data: [
            0.93, 0.94, 0.805, 0.9, 0.8375, 0.9, 0.781, 0.862, 0.756, 0.882,
            0.88, 0.94, 0.87, 0.91, 0.85, 0.87, 0.781, 0.895, 0.837, 0.857,
            0.93, 0.945, 0.805, 0.839, 0.8375, 0.879, 0.781, 0.862, 0.756,
            0.882, 0.958, 0.897, 0.982, 0.795, 0.85, 0.725, 0.781, 0.895, 0.894,
            0.983, 0.885, 0.89, 0.869, 0.87, 0.91, 0.901, 0.887, 0.867, 0.885,
            0.89, 0.857, 0.87, 0.852, 0.88, 0.923, 0.897, 0.915, 0.858, 0.87,
            0.881,
          ],
        },
        {
          name: "预测成材率",
          type: "line",
          data: [
            0.913675259404184, 0.933003705472129, 0.878992064275502,
            0.903686940765112, 0.841179450971394, 0.898899014298818,
            0.8397098373277, 0.884905306483473, 0.794401245329694,
            0.857256127487572, 0.896665060599412, 0.873540952041558,
            0.884627055770255, 0.907034582883708, 0.880692049371515,
            0.835331370443003, 0.828754517687491, 0.900668372888897,
            0.85143711706842, 0.876587907122122, 0.910819362714554,
            0.9156421882841, 0.850203745883204, 0.828328288270655,
            0.856253901805918, 0.868163843688809, 0.842908754365064,
            0.883111054062499, 0.82508713323423, 0.878876077789584,
            0.908941731199771, 0.885687025445581, 0.879291260659305,
            0.834568948257952, 0.830783208772847, 0.78891827351263,
            0.822034834313024, 0.89797513598009, 0.829692862482568,
            0.918446504598816, 0.871990365767242, 0.898644592614728,
            0.883665106257004, 0.887233717264357, 0.889789842132682,
            0.868072237621345, 0.883415588844229, 0.879645058752995,
            0.89679304637892, 0.884363380560238, 0.878513212426696,
            0.855387946295555, 0.840112638542851, 0.911664032929831,
            0.886798018472323, 0.893553072413394, 0.902197801214423,
            0.870879529048379, 0.904036912775041, 0.862100148235193,
          ],
        },
        {
          name: "预测偏差",
          type: "bar",
          data: [
            1.75534845116301, 0.744286651901168, 9.19156077956546,
            0.409660085012445, 0.439337429420178, 0.122331744575778,
            7.51726470265044, 2.65722813033329, 5.07952980551508,
            2.80542772249751, 1.89375688629682, 7.07011148494063,
            1.68127077819023, 0.325870012779347, 3.6108293378253,
            3.98489994908012, 6.1145349151717, 0.633337752949384,
            1.72486464377778, 2.28563677037596, 2.06243411671463,
            3.10664674242327, 5.61537215940422, 1.2719561060006,
            2.23927185742304, 1.23278228796258, 7.92685715301715,
            2.44907819750569, 9.13850968706746, 0.354186191657145,
            5.12090488520136, 1.26120117663534, 10.4591384257327,
            4.9772261959688, 2.26079896790036, 8.81631358794897,
            5.25414011690448, 0.33241742794302, 7.19319211604385,
            6.56698834193122, 1.47001516754328, 0.971302540980668,
            1.68758414925248, 1.98088704188011, 2.22089646893605,
            3.65457962027248, 0.404104978102708, 1.45848428523588,
            1.33254761343729, 0.633328026939552, 2.51029316530875,
            1.67954640280977, 1.39523021797523, 3.59818556020807,
            3.92220818284692, 0.384272863612712, 1.39914740825979,
            1.50111061169918, 3.91228882471735, 2.14527261802577,
          ],
          yAxisIndex: 1,
        },
      ],
    });
  },
};
</script>
