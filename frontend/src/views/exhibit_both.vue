<template>
  <div>
    <el-col :span="20" :offset="1">
      <div class="block">
        <span class="demonstration"></span>
        <el-slider
          v-model="show_range"
          range
          :min="1"
          :max="195"
          @change="changeShow()"
        ></el-slider>
      </div>
      <div id="myChart" :style="{ width: '1200px', height: '400px' }"></div>
    </el-col>
  </div>
</template>

<script>
export default {
  name: "net",
  components: {},

  data() {
    return {
      show_range: [1, 60],
      alldata: {
        number: [
          1, 3, 4, 6, 7, 8, 9, 10, 11, 13, 14, 16, 17, 18, 19, 20, 21, 22, 23,
          24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
          41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,
          58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74,
          75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91,
          92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106,
          107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120,
          121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134,
          135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148,
          149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162,
          163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176,
          177, 178, 179, 180, 181, 182, 183, 184, 186, 187, 188, 189, 190, 191,
          192, 193, 194, 195, 196, 197, 198, 199, 200,
        ],
        trueValue: [
          0.91512, 0.789705, 0.8793, 0.8829, 0.762256, 0.85338, 0.594216,
          0.755874, 0.86592, 0.77169, 0.88907, 0.85347, 0.752884, 0.863675,
          0.749952, 0.808151, 0.91512, 0.913815, 0.789705, 0.819703, 0.7529125,
          0.862299, 0.762256, 0.84907, 0.594216, 0.755874, 0.942672, 0.804609,
          0.871034, 0.776715, 0.64855, 0.711225, 0.752884, 0.863675, 0.801024,
          0.926969, 0.797385, 0.76896, 0.769934, 0.783, 0.819, 0.771256,
          0.672346, 0.747354, 0.69561, 0.73069, 0.672745, 0.783, 0.755724,
          0.68992, 0.69225, 0.77142, 0.8235, 0.7293, 0.77952, 0.830783, 0.87889,
          0.922008, 0.827005, 0.87048, 0.853415, 0.84132, 0.859663, 0.881836,
          0.850872, 0.818989, 0.86078, 0.905728, 0.86877, 0.758416, 0.7656,
          0.866904, 0.84667, 0.801009, 0.730505, 0.83979, 0.895653, 0.77602,
          0.821865, 0.784, 0.749398, 0.760694, 0.871484, 0.704592, 0.76245,
          0.857472, 0.883545, 0.825752, 0.856515, 0.8211, 0.741825, 0.816687,
          0.759225, 0.844551, 0.751493, 0.8917, 0.882975, 0.72128, 0.800607,
          0.7726075, 0.820986, 0.812282, 0.7884, 0.829821, 0.808064, 0.86996,
          0.798724, 0.82167, 0.687232, 0.83056, 0.783176, 0.836432, 0.858192,
          0.844545, 0.779259, 0.802923, 0.77989, 0.836808, 0.699776, 0.78011,
          0.67662, 0.796446, 0.903394, 0.862914, 0.927008, 0.863675, 0.7973,
          0.777975, 0.729454, 0.856515, 0.833208, 0.864457, 0.81774, 0.87665,
          0.803825, 0.88044, 0.87906, 0.851445, 0.822249, 0.900565, 0.852255,
          0.82236, 0.8797, 0.83955, 0.867272, 0.82984, 0.831623, 0.837798,
          0.84363, 0.906268, 0.78735, 0.831664, 0.854725, 0.841426, 0.795296,
          0.832566, 0.90342, 0.809685, 0.813435, 0.856692, 0.841203, 0.850874,
          0.821916, 0.817152, 0.81269, 0.850454, 0.808185, 0.830783, 0.844375,
          0.818448, 0.90903, 0.856394, 0.880752, 0.82659, 0.822063, 0.85511,
          0.849884, 0.874125, 0.87696, 0.85568, 0.842688, 0.862845, 0.86657,
          0.841464, 0.809094, 0.808594, 0.851808, 0.851006, 0.849508, 0.84488,
          0.88264, 0.87478, 0.842555, 0.827776, 0.835188,
        ],
        predictValue: [
          0.881736958172379, 0.859201136485961, 0.854456504062925,
          0.883941035148852, 0.823559086844827, 0.876112490281106,
          0.615813377618076, 0.761779853419387, 0.859702326802939,
          0.810978259901218, 0.887007376867701, 0.80723304264511,
          0.799330837387583, 0.867383308835035, 0.713643954025767,
          0.824985120639931, 0.887723131369422, 0.885282733314004,
          0.828404988976954, 0.804438211998919, 0.763017165421765,
          0.881610371638201, 0.809664666490313, 0.869922039723425,
          0.675389975274512, 0.769256277387888, 0.889865468779671,
          0.794577879989963, 0.795797029806561, 0.81462011696054,
          0.688639771790402, 0.770797037947903, 0.785316938129083,
          0.834617716664294, 0.750540595156019, 0.866041481104026,
          0.775511042498161, 0.781055273362999, 0.789688272525843,
          0.798378650939844, 0.776879495063847, 0.722069644342315,
          0.659876780122249, 0.75817193042563, 0.709063510908087,
          0.777707311238572, 0.689373721772085, 0.778313101086575,
          0.745118741027013, 0.728928469584924, 0.729218031669152,
          0.764622827163381, 0.812628902792427, 0.752413152223287,
          0.809451493490999, 0.814403837992259, 0.844312968392103,
          0.859486214271707, 0.828473923074144, 0.774699406323202,
          0.855833113025095, 0.849264612603201, 0.818540311902979,
          0.846783992650213, 0.846530492224191, 0.804152010345715,
          0.853473118542648, 0.853920509375144, 0.843910250066744,
          0.813121005709686, 0.846295949217178, 0.812678220581718,
          0.82962205753595, 0.841721010820869, 0.77694433134748,
          0.796944066618544, 0.830134719299602, 0.802207164929257,
          0.820796769934201, 0.782549880400383, 0.820935460731497,
          0.820853640050391, 0.854910264526733, 0.797770419912589,
          0.829309460598832, 0.814919125805492, 0.850169446419877,
          0.801606059371482, 0.85094130709516, 0.870389894560606,
          0.83708146127278, 0.836248280255177, 0.781693915175434,
          0.782194755893638, 0.73857940023829, 0.861031427798627,
          0.882258681062111, 0.784513461485806, 0.828076819963165,
          0.799098707350713, 0.778982156035578, 0.84527484905581,
          0.801506367389088, 0.849237870390525, 0.827519685515705,
          0.861514137541679, 0.835139933079651, 0.799650170409437,
          0.757988548574439, 0.798254638964748, 0.785592559276315,
          0.836364082429976, 0.835184272975289, 0.824079585530538,
          0.810182368297745, 0.826604074069429, 0.807718053553033,
          0.871932301309826, 0.774800201899545, 0.808841794447496,
          0.773834905078958, 0.797102808229305, 0.863539752409314,
          0.889646649013933, 0.906068599964373, 0.82826003848222,
          0.810014466374068, 0.832531271731963, 0.772305447880307,
          0.863404581273624, 0.806915526540024, 0.844867306683368,
          0.819398989210627, 0.832983636059954, 0.82587599170169,
          0.87181946525456, 0.856290364744411, 0.850063083291247,
          0.83965598909755, 0.844340133397213, 0.85119708671988,
          0.82014015950642, 0.814824957867294, 0.83641639850024,
          0.833008454016777, 0.849586568335191, 0.814991018235123,
          0.843159504118025, 0.80172800872586, 0.822552860597839,
          0.794176961880697, 0.839438828548339, 0.844466205315821,
          0.811806646076215, 0.864644503097462, 0.82006746608901,
          0.878651795273932, 0.832791811082841, 0.8265824227312,
          0.840646648222128, 0.840146060384672, 0.832167752914909,
          0.818121619874267, 0.809067498670538, 0.803727070253835,
          0.813412036727446, 0.831390126642168, 0.829533546424449,
          0.835266612810924, 0.839328905507574, 0.866257626613168,
          0.793415844137578, 0.840397469867045, 0.827684458978081,
          0.808097376137452, 0.820570801518868, 0.848610256088151,
          0.819166670346029, 0.849217159130355, 0.815735125357365,
          0.865335669159188, 0.880114458103717, 0.871878930627347,
          0.796030548013579, 0.829118848511726, 0.848588429430462,
          0.81771460898638, 0.78616103828249, 0.851680530154526,
          0.801056091674256, 0.826719734766565, 0.871287846415725,
          0.833515117763037, 0.816884702510382, 0.836948642640912,
        ],
        piancha: [
          3.64794145331989, 8.80026547710364, 2.82537199329865,
          0.117910878791735, 8.04232263764753, 2.66381802726876,
          3.63460048502167, 0.781327763540909, 0.718042451619204,
          5.09119722961523, 0.231997832825148, 5.41752578941142,
          6.16918906333285, 0.429363919881351, 4.8413826450537,
          2.08304149099996, 2.99380066336416, 3.12232417786921,
          4.90056273886508, 1.86223400439922, 1.3420769905886, 2.23952151610995,
          6.21952027800535, 2.45586815261695, 13.6606848813415,
          1.77043758455611, 5.60179269356982, 1.24670740819916,
          8.63766169787158, 4.88018345989719, 6.18144657935425,
          8.37597637145817, 4.30782672086045, 3.36437703253024,
          6.30235858650688, 6.572767686511, 2.74321156051827, 1.57293921179239,
          2.56570985640888, 1.9640678084092, 5.14291879562303, 6.37743572272831,
          1.85458378242027, 1.44749749457824, 1.93405944539141,
          6.43464550473828, 2.47177188564537, 0.598582236708159,
          1.40332435822961, 5.65405693195212, 5.34027181930683,
          0.881124787614869, 1.32010895052491, 3.16922421819374,
          3.83973387353748, 1.97153312089212, 3.93417055694078, 6.7810459050565,
          0.177619612232578, 11.0031929138864, 0.283345503078232,
          0.944303309466223, 4.78358241508833, 3.97488958828929,
          0.51024217224322, 1.81162258031371, 0.848867475702468,
          5.71998333107251, 2.86148807316734, 7.2130606039015, 10.5402232519825,
          6.25510776490616, 2.01352858422412, 5.0825909347921, 6.35715448182831,
          5.10198185039784, 7.3151410982153, 3.37454768295369,
          0.129976342318904, 0.184964234645018, 9.54599034578382,
          7.90852038406918, 1.90178310482663, 13.2244504497054,
          8.76902886731354, 4.96259635236002, 3.77745939144272,
          2.92411530683762, 0.650740839896532, 6.00291006705714,
          12.8408265120183, 2.39519917118515, 2.95945407164325,
          7.38336040172375, 1.71839255478227, 3.43933746791217,
          0.0811256193990184, 8.76683971353792, 3.43112412996202,
          3.42880535727557, 5.11626799536436, 4.06174814360157,
          1.66240073428316, 2.33988660090847, 2.40769116254466,
          0.970833424332206, 4.5592636604948, 2.67988725285852, 10.295875130151,
          3.88958787267048, 0.308558903275213, 0.00811991530984527,
          2.6809533326704, 2.42324736626961, 3.96830428621876, 2.94935804173368,
          3.568202381494, 4.19741461719131, 10.7211739041558, 3.68304398706544,
          14.3677256183615, 0.0824673900434381, 4.41161304931026,
          3.0979505505685, 2.25881546174648, 4.1004963114343, 1.59469037678021,
          7.01259959921117, 5.87445512401147, 0.804373685647503,
          3.15557141313767, 2.26612698105658, 0.202874900411733,
          4.9810487583467, 2.74325776153892, 0.979116662741407,
          2.59022538343106, 0.162302522036405, 2.11699729614149,
          6.24328800284126, 0.124131073460389, 0.269935368157557,
          7.37467797348025, 0.373247751743189, 3.95072664437716,
          2.37956332970106, 1.99994249375946, 0.639951887928202, 4.966868327838,
          9.2373491508208, 0.867080952650943, 0.934852121570637,
          1.20024507112566, 3.52013770952941, 8.71983552004061,
          1.50120638015362, 2.74160464967215, 2.85380253837492,
          1.61628436583131, 1.87294287537081, 0.125646201372022,
          2.19847440221368, 0.461650597595506, 0.989350981147004,
          1.10287191255768, 4.3555516550635, 2.87126420833939,
          0.150394696996857, 1.0787135086989, 2.55128065650767,
          4.70527632606536, 7.35387635392372, 4.58182668139892,
          0.132406510855553, 1.69885080128264, 4.03915267990463,
          0.149872678135942, 6.28723919965352, 3.16352409113813,
          4.66820244047249, 2.6875509274118, 2.00145542985321,
          0.612637251156494, 5.39933401624093, 2.4749718217816,
          4.94616945345401, 4.00247368111359, 7.61980076726954,
          0.25573981110554, 5.186997955419, 6.33556888804444, 0.399203637974731,
          1.07291301303338, 1.31573003923987, 0.210807942752067,
        ],
      },
      showdata: {
        number: [],
        trueValue: [],
        predictValue: [],
        piancha: [],
      },
    };
  },
  methods: {
    changeShow() {
      this.showdata.number = [];
      this.showdata.trueValue = [];
      this.showdata.predictValue = [];
      this.showdata.piancha = [];

      for (let i = this.show_range[0] - 1; i <= this.show_range[1] - 1; i++) {
        this.showdata.number.push(this.alldata.number[i]);
        this.showdata.trueValue.push(this.alldata.trueValue[i]);
        this.showdata.predictValue.push(this.alldata.predictValue[i]);
        this.showdata.piancha.push(this.alldata.piancha[i]);
      }

      this.createChart();
    },
    createChart() {
      let myChart = this.$echarts.getInstanceByDom(
        document.getElementById("myChart")
      );
      myChart.setOption({
        title: {
          text: "综合成材率拟合结果",
        },
        tooltip: {
          trigger: "axis",
        },
        legend: {
          data: ["真实综合成材率", "预测综合成材率", "预测偏差"],
        },
        grid: {
          left: "3%",
          right: "4%",
          bottom: "3%",
          containLabel: true,
        },
        toolbox: {
          feature: {
            saveAsImage: {},
          },
        },
        xAxis: {
          type: "category",
          boundaryGap: false,
          data: this.showdata.number,
        },
        yAxis: [
          {
            type: "value",
            name: "综合成材率",
          },
          {
            type: "value",
            name: "预测偏差",
            max: 25,
            axisLabel: {
              formatter: "{value} %",
            },
          },
        ],
        series: [
          {
            name: "真实综合成材率",
            type: "line",
            data: this.showdata.trueValue,
          },
          {
            name: "预测综合成材率",
            type: "line",
            data: this.showdata.predictValue,
          },
          {
            name: "预测偏差",
            type: "bar",
            data: this.showdata.piancha,
            yAxisIndex: 1,
          },
        ],
      });
    },
  },
  mounted() {
    let myChart = this.$echarts.init(document.getElementById("myChart"));
    myChart.setOption({
      title: {
        text: "综合成材率拟合结果",
      },
      tooltip: {
        trigger: "axis",
      },
      legend: {
        data: ["真实综合成材率", "预测综合成材率", "预测偏差"],
      },
      grid: {
        left: "3%",
        right: "4%",
        bottom: "3%",
        containLabel: true,
      },
      toolbox: {
        feature: {
          saveAsImage: {},
        },
      },
      xAxis: {
        type: "category",
        boundaryGap: false,
        data: [
          1, 3, 4, 6, 7, 8, 9, 10, 11, 13, 14, 16, 17, 18, 19, 20, 21, 22, 23,
          24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
          41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,
          58, 59, 60, 61, 62, 63, 64,
        ],
      },
      yAxis: [
        {
          type: "value",
          name: "综合成材率",
        },
        {
          type: "value",
          name: "预测偏差",
          max: 25,
          axisLabel: {
            formatter: "{value} %",
          },
        },
      ],
      series: [
        {
          name: "真实综合成材率",
          type: "line",
          data: [
            0.91512, 0.789705, 0.8793, 0.8829, 0.762256, 0.85338, 0.594216,
            0.755874, 0.86592, 0.77169, 0.88907, 0.85347, 0.752884, 0.863675,
            0.749952, 0.808151, 0.91512, 0.913815, 0.789705, 0.819703,
            0.7529125, 0.862299, 0.762256, 0.84907, 0.594216, 0.755874,
            0.942672, 0.804609, 0.871034, 0.776715, 0.64855, 0.711225, 0.752884,
            0.863675, 0.801024, 0.926969, 0.797385, 0.76896, 0.769934, 0.783,
            0.819, 0.771256, 0.672346, 0.747354, 0.69561, 0.73069, 0.672745,
            0.783, 0.755724, 0.68992, 0.69225, 0.77142, 0.8235, 0.7293, 0.77952,
            0.830783, 0.87889, 0.922008, 0.827005, 0.87048,
          ],
        },
        {
          name: "预测综合成材率",
          type: "line",
          data: [
            0.881736958172379, 0.859201136485961, 0.854456504062925,
            0.883941035148852, 0.823559086844827, 0.876112490281106,
            0.615813377618076, 0.761779853419387, 0.859702326802939,
            0.810978259901218, 0.887007376867701, 0.80723304264511,
            0.799330837387583, 0.867383308835035, 0.713643954025767,
            0.824985120639931, 0.887723131369422, 0.885282733314004,
            0.828404988976954, 0.804438211998919, 0.763017165421765,
            0.881610371638201, 0.809664666490313, 0.869922039723425,
            0.675389975274512, 0.769256277387888, 0.889865468779671,
            0.794577879989963, 0.795797029806561, 0.81462011696054,
            0.688639771790402, 0.770797037947903, 0.785316938129083,
            0.834617716664294, 0.750540595156019, 0.866041481104026,
            0.775511042498161, 0.781055273362999, 0.789688272525843,
            0.798378650939844, 0.776879495063847, 0.722069644342315,
            0.659876780122249, 0.75817193042563, 0.709063510908087,
            0.777707311238572, 0.689373721772085, 0.778313101086575,
            0.745118741027013, 0.728928469584924, 0.729218031669152,
            0.764622827163381, 0.812628902792427, 0.752413152223287,
            0.809451493490999, 0.814403837992259, 0.844312968392103,
            0.859486214271707, 0.828473923074144, 0.774699406323202,
          ],
        },
        {
          name: "预测偏差",
          type: "bar",
          data: [
            3.64794145331989, 8.80026547710364, 2.82537199329865,
            0.117910878791735, 8.04232263764753, 2.66381802726876,
            3.63460048502167, 0.781327763540909, 0.718042451619204,
            5.09119722961523, 0.231997832825148, 5.41752578941142,
            6.16918906333285, 0.429363919881351, 4.8413826450537,
            2.08304149099996, 2.99380066336416, 3.12232417786921,
            4.90056273886508, 1.86223400439922, 1.3420769905886,
            2.23952151610995, 6.21952027800535, 2.45586815261695,
            13.6606848813415, 1.77043758455611, 5.60179269356982,
            1.24670740819916, 8.63766169787158, 4.88018345989719,
            6.18144657935425, 8.37597637145817, 4.30782672086045,
            3.36437703253024, 6.30235858650688, 6.572767686511,
            2.74321156051827, 1.57293921179239, 2.56570985640888,
            1.9640678084092, 5.14291879562303, 6.37743572272831,
            1.85458378242027, 1.44749749457824, 1.93405944539141,
            6.43464550473828, 2.47177188564537, 0.598582236708159,
            1.40332435822961, 5.65405693195212, 5.34027181930683,
            0.881124787614869, 1.32010895052491, 3.16922421819374,
            3.83973387353748, 1.97153312089212, 3.93417055694078,
            6.7810459050565, 0.177619612232578, 11.0031929138864,
          ],
          yAxisIndex: 1,
        },
      ],
    });
  },
};
</script>
