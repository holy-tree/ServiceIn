<template>
  <div>
    <el-col :span="20" :offset="1">
      <div class="block">
        <span class="demonstration"></span>
        <el-slider
          v-model="show_range"
          range
          :min="1"
          :max="195"
          @change="changeShow()"
        ></el-slider>
      </div>
      <div id="myChart" :style="{ width: '1200px', height: '400px' }"></div>
    </el-col>
  </div>
</template>

<script>
export default {
  name: "net",
  components: {},

  data() {
    return {
      show_range: [1, 60],
      alldata: {
        number: [
          1, 3, 4, 6, 7, 8, 9, 10, 11, 13, 14, 16, 17, 18, 19, 20, 21, 22, 23,
          24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
          41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,
          58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74,
          75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91,
          92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106,
          107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120,
          121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134,
          135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148,
          149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162,
          163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176,
          177, 178, 179, 180, 181, 182, 183, 184, 186, 187, 188, 189, 190, 191,
          192, 193, 194, 195, 196, 197, 198, 199, 200,
        ],
        trueValue: [
          0.984, 0.981, 0.977, 0.981, 0.976, 0.99, 0.786, 0.857, 0.984, 0.887,
          0.977, 0.981, 0.964, 0.965, 0.896, 0.943, 0.984, 0.967, 0.981, 0.977,
          0.899, 0.981, 0.976, 0.985, 0.786, 0.857, 0.984, 0.897, 0.887, 0.977,
          0.763, 0.981, 0.964, 0.965, 0.896, 0.943, 0.901, 0.864, 0.886, 0.9,
          0.9, 0.856, 0.758, 0.862, 0.786, 0.821, 0.785, 0.9, 0.887, 0.784,
          0.75, 0.86, 0.9, 0.85, 0.896, 0.943, 0.982, 0.984, 0.965, 0.936,
          0.943, 0.984, 0.967, 0.982, 0.968, 0.899, 0.965, 0.976, 0.985, 0.886,
          0.957, 0.984, 0.946, 0.957, 0.965, 0.903, 0.981, 0.964, 0.935, 0.896,
          0.962, 0.974, 0.977, 0.932, 0.975, 0.924, 0.985, 0.886, 0.957, 0.966,
          0.945, 0.927, 0.955, 0.963, 0.881, 0.964, 0.965, 0.896, 0.943, 0.901,
          0.934, 0.922, 0.9, 0.901, 0.944, 0.956, 0.932, 0.915, 0.896, 0.928,
          0.892, 0.976, 0.941, 0.915, 0.9222, 0.957, 0.934, 0.952, 0.896, 0.905,
          0.895, 0.903, 0.943, 0.962, 0.944, 0.965, 0.938, 0.943, 0.934, 0.957,
          0.932, 0.979, 0.924, 0.985, 0.925, 0.957, 0.966, 0.945, 0.927, 0.955,
          0.963, 0.924, 0.926, 0.965, 0.911, 0.943, 0.901, 0.934, 0.922, 0.946,
          0.905, 0.944, 0.955, 0.898, 0.928, 0.922, 0.956, 0.947, 0.915, 0.954,
          0.957, 0.934, 0.948, 0.896, 0.905, 0.899, 0.903, 0.943, 0.965, 0.944,
          0.965, 0.938, 0.944, 0.934, 0.957, 0.932, 0.956, 0.945, 0.928, 0.955,
          0.924, 0.943, 0.965, 0.936, 0.943, 0.922, 0.934, 0.922, 0.946, 0.895,
          0.944, 0.955, 0.905, 0.928, 0.948,
        ],
        predictValue: [
          0.965044143525751, 0.977484520516288, 0.945522686583801,
          0.983359666756745, 0.980766272151495, 0.990063551277245,
          0.775191858319029, 0.88862573155586, 0.958777546465607,
          0.916745937863148, 0.977920129624678, 0.966362657033949,
          0.964496506900487, 0.963044040341841, 0.838164016719064,
          0.941132217244925, 0.974642357979416, 0.966843538492925,
          0.974360549442646, 0.971158685982327, 0.891110877057018,
          1, 0.960560276895222, 0.985065282244626,
          0.818568061565904, 0.875272745302847, 0.979012667407272,
          0.897131669722968, 0.905043715787487, 0.976096844557838,
          0.82890429719637, 0.977030275285623, 0.955332919419861,
          0.9294441273737, 0.904600520378453, 0.942941670274328,
          0.889357351804924, 0.869148136851759, 0.893651075429215,
          0.899851567185157, 0.873104477346913, 0.831808244807943,
          0.746960760547099, 0.861906655282566, 0.790665710189381,
          0.87939791304554, 0.78470501299331, 0.909894866367045,
          0.886927189096212, 0.799558218000938, 0.822304534380182,
          0.855710590416543, 0.900721440130502, 0.863969271439252,
          0.895374383559515, 0.944674281357481, 0.969390436008062,
          0.922648955896313, 0.949446774400441, 0.937126068725761,
          0.94359975898341, 0.984772838483449, 0.988183457565948,
          0.961519888517387, 0.968018420971222, 0.912212276894506,
          0.97205589681413, 0.961121450750825, 0.982087493701364,
          0.94310348455508, 0.957682684777339, 0.922314948137808,
          0.930211081831584, 0.962312565420761, 0.921703528713869,
          0.904719711432948, 0.917303354639192, 0.963475285501478,
          0.948248421226773, 0.903740494249927, 0.960658981473361,
          0.972276348568049, 0.983609433771092, 0.943442366701487,
          0.98067649060728, 0.926619710461192, 0.962699233982043,
          0.877852668379901, 0.958356248147898, 0.970085168878432,
          0.971291173225422, 0.942109475079952, 0.953941428332034,
          0.894966901241369, 0.882547031047497, 0.956213085019601,
          0.98443663936281, 0.897127178537966, 0.943634154358444,
          0.902807926055245, 0.919122512173577, 0.943766261299854,
          0.900935844479126, 0.949425473362724, 0.952416377780994,
          0.963980376623988, 0.94052555566255, 0.914895783242701,
          0.914682631961678, 0.927881106984161, 0.911648882305827,
          0.974066789100608, 0.941908162555322, 0.931336506710522,
          0.920675516154065, 0.938273425992086, 0.936836198356336,
          0.969906262725037, 0.908938172267065, 0.916681520745317,
          0.903150152613051, 0.902772147123289, 0.938254952776255,
          0.963789426693039, 0.930535836052499, 0.961073893683975,
          0.926907301052041, 0.951693771528481, 0.935334446140631,
          0.950731059283549, 0.910106883749146, 0.969212713930903,
          0.923658373745599, 0.962884101814816, 0.923555132284881,
          0.956923307674887, 0.948379710005527, 0.934639410633879,
          0.939690929900927, 0.933697837879367, 0.956815571212744,
          0.923768132542726, 0.916349696270044, 0.961743778077778,
          0.91145672494516, 0.941353827487741, 0.916216829434951,
          0.933396920303134, 0.909473104418896, 0.892336119343334,
          0.932663264013638, 0.944744500666918, 0.94759066205364,
          0.905666180739711, 0.943009578967965, 0.94296601761986,
          0.952026713080683, 0.936352138959533, 0.914957477316068,
          0.953587077911956, 0.946454316989879, 0.92713430636341,
          0.94612141770763, 0.892425908980313, 0.899454071209666,
          0.901498942758204, 0.929915893728118, 0.943234493770603,
          0.96500354555135, 0.945996880668127, 0.974721605695395,
          0.935564109340278, 0.933646548746639, 0.929248604287509,
          0.938952673760765, 0.921840572693237, 0.952194906996221,
          0.935588947137315, 0.915641803189248, 0.948161061690434,
          0.946558685548913, 0.959894626211795, 0.963501903631118,
          0.897416777847024, 0.946712677585227, 0.923295115651686,
          0.935112728969869, 0.922944966646217, 0.945103009366069,
          0.896780652162541, 0.941036184813505, 0.955163618721993,
          0.91961689796265, 0.910439190697351, 0.942664774745632,
        ],
        piancha: [
          1.92640817827734, 0.3583567261684, 3.22183351240522,
          0.240536876324673, 0.488347556505641, 0.00641932093383836,
          1.37508163880038, 3.69028372880514, 2.56325747300742,
          3.35354429122299, 0.0941790813385899, 1.49208389052508,
          0.0515048651957553, 0.202690120016474, 6.45490884831875,
          0.198068160665422, 0.950979880140648, 0.0161800938029922,
          0.676804338160442, 0.597882703958338, 0.877544265070306,
          3.51564404111927, 1.58193884270266, 0.00662763904832345,
          4.14351928319389, 2.13217564794015, 0.506842743163413,
          0.0146788988816014, 2.03424078776629, 0.09244170339427,
          8.63752256833159, 0.404661031027212, 0.899074748977073,
          3.68454638614508, 0.959879506523765, 0.00618554885174873,
          1.29219180855449, 0.595849172657288, 0.863552531514103,
          0.0164925349825558, 2.98839140589856, 2.8261396252403,
          1.45636404391833, 0.0108288535306196, 0.593601805264758,
          7.11302229543728, 0.0375779626356766, 1.09942959633833,
          0.00820867010010909, 1.98446658175229, 9.64060458402427,
          0.498768556215933, 0.080160014500224, 1.64344369873553,
          0.0698232634469841, 0.177548394218562, 1.28406965294685,
          6.23486220565924, 1.61173322275222, 0.120306487794971,
          0.0636011647306496, 0.0785404962854676, 2.19063677000497,
          2.08555106747586, 0.00190299289484155, 1.4696637257515,
          0.731181017008289, 1.52444152143186, 0.295685918643253,
          6.44508855023476, 0.0713359223969713, 6.2688060835561,
          1.66901883387061, 0.555127003214324, 4.48668096229337,
          0.190444233992029, 6.49303214687136, 0.0544309645769692,
          1.41694344671368, 0.86389444753649, 0.139399015243132,
          0.176966266114062, 0.676502944840534, 1.22772174908658,
          0.582204164849235, 0.283518448180943, 2.26403715918345,
          0.919563388273032, 0.141718719738561, 0.42289532903023,
          2.7821347328489, 1.62993258683409, 0.110845200834133,
          7.06470392093779, 0.175599437854368, 0.807771263526863,
          2.01415951946218, 0.125801176112272, 0.0672486064097614,
          0.200657719783012, 1.59287878227228, 2.36076586766312,
          0.103982719902887, 5.3746363332657, 0.891565442901909,
          0.834767429287446, 0.914759191260727, 0.0113898095408734,
          2.08511517429442, 0.0128117473964446, 2.20278949616894,
          0.198074887232789, 0.096510367196812, 1.78541056945596,
          0.165309460630564, 1.95679979184054, 0.303661494254387,
          1.88090995010893, 1.44399244052064, 1.2907757729632,
          0.910631576877203, 0.0252328767121827, 0.503186343981433,
          0.1860110907525, 1.42628855376069, 0.406850395443002,
          1.18259050617899, 0.921926991355361, 0.142874319125368,
          0.65506172585695, 2.34904680803156, 0.999722785403162,
          0.0369725383550909, 2.24526885128772, 0.15620191514801,
          0.00801382707554665, 1.82404658327877, 1.09635866308158,
          1.36903235177205, 2.23059289221288, 0.64220444312108,
          0.0250938806573586, 1.04214943088078, 0.337432323546318,
          0.0501344615982343, 0.174567604693421, 1.68888229022763,
          0.0645695606922929, 1.35866546432799, 5.67271465715285,
          3.0567142556506, 0.0788665960718223, 0.775846905378011,
          0.853694959878722, 1.61741152672036, 2.27397154228416,
          0.415615786539433, 1.12437814577265, 0.00464728786142201,
          0.0432832377404611, 1.10195224766154, 0.735084971797651,
          0.198162689068557, 0.398894087018636, 0.61280981108663,
          0.277969161090539, 2.98071912825227, 0.0248667837330889,
          0.000367414647675689, 0.211533969081259, 1.00742027931555,
          0.259689835791252, 1.09676390395773, 0.508714744378058,
          1.88582301350418, 1.0900673075926, 0.398022280730017,
          0.995878609807932, 1.33170224253793, 0.716119194718947,
          2.44141618494729, 1.79158284324444, 0.155243147034403,
          4.1221391189077, 0.393709181890465, 0.140468075020167,
          0.119135864011661, 0.102490959459534, 0.0948193059123684,
          0.19895554888726, 0.313963473145647, 0.0171328504704709,
          1.61512684670166, 1.89232858864752, 0.562787474089443,
        ],
      },
      showdata: {
        number: [],
        trueValue: [],
        predictValue: [],
        piancha: [],
      },
    };
  },
  methods: {
    changeShow() {
      this.showdata.number = [];
      this.showdata.trueValue = [];
      this.showdata.predictValue = [];
      this.showdata.piancha = [];

      for (let i = this.show_range[0] - 1; i <= this.show_range[1] - 1; i++) {
        this.showdata.number.push(this.alldata.number[i]);
        this.showdata.trueValue.push(this.alldata.trueValue[i]);
        this.showdata.predictValue.push(this.alldata.predictValue[i]);
        this.showdata.piancha.push(this.alldata.piancha[i]);
      }

      this.createChart();
    },
    createChart() {
      let myChart = this.$echarts.getInstanceByDom(
        document.getElementById("myChart")
      );
      myChart.setOption({
        title: {
          text: "成锭率拟合结果",
        },
        tooltip: {
          trigger: "axis",
        },
        legend: {
          data: ["真实成锭率", "预测成锭率", "预测偏差"],
        },
        grid: {
          left: "3%",
          right: "4%",
          bottom: "3%",
          containLabel: true,
        },
        toolbox: {
          feature: {
            saveAsImage: {},
          },
        },
        xAxis: {
          type: "category",
          boundaryGap: false,
          data: this.showdata.number,
        },
        yAxis: [
          {
            type: "value",
            name: "成锭率",
          },
          {
            type: "value",
            name: "预测偏差",
            max: 25,
            axisLabel: {
              formatter: "{value} %",
            },
          },
        ],
        series: [
          {
            name: "真实成锭率",
            type: "line",
            data: this.showdata.trueValue,
          },
          {
            name: "预测成锭率",
            type: "line",
            data: this.showdata.predictValue,
          },
          {
            name: "预测偏差",
            type: "bar",
            data: this.showdata.piancha,
            yAxisIndex: 1,
          },
        ],
      });
    },
  },
  mounted() {
    let myChart = this.$echarts.init(document.getElementById("myChart"));
    myChart.setOption({
      title: {
        text: "成锭率拟合结果",
      },
      tooltip: {
        trigger: "axis",
      },
      legend: {
        data: ["真实成锭率", "预测成锭率", "预测偏差"],
      },
      grid: {
        left: "3%",
        right: "4%",
        bottom: "3%",
        containLabel: true,
      },
      toolbox: {
        feature: {
          saveAsImage: {},
        },
      },
      xAxis: {
        type: "category",
        boundaryGap: false,
        data: [
          1, 3, 4, 6, 7, 8, 9, 10, 11, 13, 14, 16, 17, 18, 19, 20, 21, 22, 23,
          24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,
          41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57,
          58, 59, 60, 61, 62, 63, 64,
        ],
      },
      yAxis: [
        {
          type: "value",
          name: "成锭率",
        },
        {
          type: "value",
          name: "预测偏差",
          max: 25,
          axisLabel: {
            formatter: "{value} %",
          },
        },
      ],
      series: [
        {
          name: "真实成锭率",
          type: "line",
          data: [
            0.984, 0.981, 0.977, 0.981, 0.976, 0.99, 0.786, 0.857, 0.984, 0.887,
            0.977, 0.981, 0.964, 0.965, 0.896, 0.943, 0.984, 0.967, 0.981,
            0.977, 0.899, 0.981, 0.976, 0.985, 0.786, 0.857, 0.984, 0.897,
            0.887, 0.977, 0.763, 0.981, 0.964, 0.965, 0.896, 0.943, 0.901,
            0.864, 0.886, 0.9, 0.9, 0.856, 0.758, 0.862, 0.786, 0.821, 0.785,
            0.9, 0.887, 0.784, 0.75, 0.86, 0.9, 0.85, 0.896, 0.943, 0.982,
            0.984, 0.965, 0.936,
          ],
        },
        {
          name: "预测成锭率",
          type: "line",
          data: [
            0.965044143525751, 0.977484520516288, 0.945522686583801,
            0.983359666756745, 0.980766272151495, 0.990063551277245,
            0.775191858319029, 0.88862573155586, 0.958777546465607,
            0.916745937863148, 0.977920129624678, 0.966362657033949,
            0.964496506900487, 0.963044040341841, 0.838164016719064,
            0.941132217244925, 0.974642357979416, 0.966843538492925,
            0.974360549442646, 0.971158685982327, 0.891110877057018,
            1, 0.960560276895222, 0.985065282244626,
            0.818568061565904, 0.875272745302847, 0.979012667407272,
            0.897131669722968, 0.905043715787487, 0.976096844557838,
            0.82890429719637, 0.977030275285623, 0.955332919419861,
            0.9294441273737, 0.904600520378453, 0.942941670274328,
            0.889357351804924, 0.869148136851759, 0.893651075429215,
            0.899851567185157, 0.873104477346913, 0.831808244807943,
            0.746960760547099, 0.861906655282566, 0.790665710189381,
            0.87939791304554, 0.78470501299331, 0.909894866367045,
            0.886927189096212, 0.799558218000938, 0.822304534380182,
            0.855710590416543, 0.900721440130502, 0.863969271439252,
            0.895374383559515, 0.944674281357481, 0.969390436008062,
            0.922648955896313, 0.949446774400441, 0.937126068725761,
          ],
        },
        {
          name: "预测偏差",
          type: "bar",
          data: [
            1.92640817827734, 0.3583567261684, 3.22183351240522,
            0.240536876324673, 0.488347556505641, 0.00641932093383836,
            1.37508163880038, 3.69028372880514, 2.56325747300742,
            3.35354429122299, 0.0941790813385899, 1.49208389052508,
            0.0515048651957553, 0.202690120016474, 6.45490884831875,
            0.198068160665422, 0.950979880140648, 0.0161800938029922,
            0.676804338160442, 0.597882703958338, 0.877544265070306,
            3.51564404111927, 1.58193884270266, 0.00662763904832345,
            4.14351928319389, 2.13217564794015, 0.506842743163413,
            0.0146788988816014, 2.03424078776629, 0.09244170339427,
            8.63752256833159, 0.404661031027212, 0.899074748977073,
            3.68454638614508, 0.959879506523765, 0.00618554885174873,
            1.29219180855449, 0.595849172657288, 0.863552531514103,
            0.0164925349825558, 2.98839140589856, 2.8261396252403,
            1.45636404391833, 0.0108288535306196, 0.593601805264758,
            7.11302229543728, 0.0375779626356766, 1.09942959633833,
            0.00820867010010909, 1.98446658175229, 9.64060458402427,
            0.498768556215933, 0.080160014500224, 1.64344369873553,
            0.0698232634469841, 0.177548394218562, 1.28406965294685,
            6.23486220565924, 1.61173322275222, 0.120306487794971,
          ],
          yAxisIndex: 1,
        },
      ],
    });
  },
};
</script>
